var dnssModuleIntegrationSource,previousLoggedInState,isUserLoggedIn,isDnssCaptured,host="cdn.clarip.com",start=getQueryString("start",window.location.href),client=getQueryString("client",window.location.href),brand=getQueryString("brand",window.location.href),pageUrl=decodeURIComponent(getQueryString("pageUrl",window.location.href));hideLoader(!1);var checkIfDNSSIsSubmitted=!1,gpcRequestStatus=""===(enableGPCProcessing||"")?"not-planned":"planned",Validator={isRequired:function(e){return""!==e},isBetween:function(e,t,a){return!(e<t||e>a)},isFirstNameValid:function(e){return/^[^0-9_!Â¡?Ã·?Â¿/\\+=@#$%Ë†&`^,"*(){}|~<>;:[\]]{1,}$/i.test(e)},isLastNameValid:function(e){return/^[^0-9_!Â¡?Ã·?Â¿/\\+=@#$%Ë†&`^,"*(){}|~<>;:[\]]{1,}$/i.test(e)},isEmailValid:function(e){return/^(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/.test(e)},isPhoneNumberValid:function(e){return/^[0-9()\-+ ]{0,20}$/.test(e)},isStreetAddressValid:function(e){return/^\d+\s[A-z]+/g.test(e)},isCityValid:function(e){return/^[^0-9_!Â¡?Ã·?Â¿/\\+=@#$%Ë†&`^,"*(){}|~<>;:[\]]{1,}$/i.test(e)},isZIPValid:function(e){return/^[a-zA-Z0-9]{5,6}$/.test(e)},checkFirstName:function(){var e=!1,t=document.getElementById("first-name");if(null!==t){var a=1*t.dataset.specialCharValidation,n=t.value;allowDNSSFormSubmissionWithBlankName||this.isRequired(n)?allowDNSSFormSubmissionWithBlankName||this.isBetween(n.replaceAll(" ","").length,1,100)?a&&!this.isFirstNameValid(n)?showInputValidatorError(t,firstNameErrValid):(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,firstNameErrLength):showInputValidatorError(t,firstNameErrEmpty)}else e=!0;return e},checkLastName:function(){var e=!1,t=document.getElementById("last-name");if(null!==t){var a=1*t.dataset.specialCharValidation,n=t.value;allowDNSSFormSubmissionWithBlankName||this.isRequired(n)?allowDNSSFormSubmissionWithBlankName||this.isBetween(n.replaceAll(" ","").length,1,100)?a&&!this.isLastNameValid(n)?showInputValidatorError(t,lastNameErrValid):(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,lastNameErrLength):showInputValidatorError(t,lastNameErrEmpty)}else e=!0;return e},checkEmail:function(){var e=!1,t=document.getElementById("email");if(null!==t){var a=t.value;this.isRequired(a)?this.isBetween(a.length,2,100)?this.isEmailValid(a)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,emailErrValid):showInputValidatorError(t,emailErrLength):showInputValidatorError(t,emailErrEmpty)}else e=!0;return e},checkPhoneNumber:function(){var e=!1,t=document.getElementById("phone-number");if(null!==t){var a=t.value;this.isRequired(a)?this.isBetween(a.length,10,20)?this.isPhoneNumberValid(a)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,phoneNumberErrValid):showInputValidatorError(t,phoneNumberErrLength):showInputValidatorError(t,phoneNumberErrEmpty)}else e=!0;return e},checkState:function(){var e=!1,t=document.getElementById("form-state");if(null!==t){var a=t.value;this.isRequired(a)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,stateErrRequired)}else e=!0;return e},checkStreetAddress:function(){var e=!1,t=document.getElementById("street-address");if(null!==t){var a=t.value;this.isRequired(a)?this.isBetween(a.length,4,100)?this.isStreetAddressValid(a)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,streetAddressErrValid):showInputValidatorError(t,streetAddressErrLength):showInputValidatorError(t,streetAddressErrEmpty)}else e=!0;return e},checkCity:function(){var e=!1,t=document.getElementById("city");if(null!==t){var a=t.value;this.isRequired(a)?this.isBetween(a.length,2,50)?this.isCityValid(a)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,cityNameErrValid):showInputValidatorError(t,cityNameErrLength):showInputValidatorError(t,cityNameErrEmpty)}else e=!0;return e},checkZIP:function(){var e=!1,t=document.getElementById("zip");if(null!==t){var a=t.value;this.isRequired(a)?this.isBetween(a.length,5,6)?this.isZIPValid(a)?(showInputValidatorSuccess(t),e=!0):showInputValidatorError(t,zipErrValid):showInputValidatorError(t,zipErrLength):showInputValidatorError(t,zipErrEmpty)}else e=!0;return e}};function GridBuilder(e){var t,a,n,s=[domainLabel,parentLabel],i=1,l=e.length>10;this.init=function(){r(),o(),d(1),c(),u(),p()};var r=function(){for(var e=document.querySelector("#third-party-cookies-grid table thead"),t="<tr>",a=0;a<s.length;a++)t+="<th>"+s[a]+"</th>";t+="</tr>",e.innerHTML=t},o=function(){if(l){document.getElementById("third-party-cookies-grid-pagination-block").innerHTML='<span class="pagination-text">'+pagesLabel+':</span>\n<span id="prev-button" class="page-button outline-none">'+prevLabel+'</span>\n<span id="page-number" class="outline-none"></span>\n<span id="next-button" class="page-button outline-none">'+nextLabel+'</span><span id="pager-index"></span>',t=document.getElementById("prev-button"),a=document.getElementById("next-button"),n=document.querySelectorAll(".click-page-number");var e=document.getElementById("page-number");e.innerHTML="";for(var s=1;s<h()+1;s++)e.innerHTML+="<span class='click-page-number'>"+s+"</span>"}},d=function(n){var s=document.querySelector("#third-party-cookies-grid table tbody"),i=h();n<1&&(n=1),n>i-1&&(n=i),l&&(1===n?t.classList.add("pager-inactive-button"):t.classList.remove("pager-inactive-button")),l&&(n===i?a.classList.add("pager-inactive-button"):a.classList.remove("pager-inactive-button"));var r="";if(s.innerHTML="",0===e.length)r+="<tr class='no-data-row'><td colspan='2'>"+noCookiesInfoAvailable+"</td></tr>";else for(var o=(n-1)*10;o<10*n&&o<e.length;o++)r+="<tr class='data-row'><td>"+e[o].domain+"</td><td>"+e[o].cookie_co+"</td></tr>";s.innerHTML=r;var d=document.getElementById("pager-index");l&&(d.innerHTML=n+" of "+i),c()},c=function(){if(l)for(var e=document.getElementById("page-number").getElementsByClassName("click-page-number"),t=0;t<e.length;t++)t===i-1?(e[t].style.border="0",e[t].style.fontWeight="700"):(e[t].style.border="1px solid #e6e6e6",e[t].style.fontWeight="normal")},u=function(){document.addEventListener("click",function(e){"SPAN"===e.target.nodeName&&e.target.classList.contains("click-page-number")&&d(i=e.target.textContent)})},p=function(){l&&(t.addEventListener("click",m),a.addEventListener("click",g))},m=function(){i>1&&d(--i)},g=function(){i<h()&&d(++i)},h=function(){return Math.ceil(e.length/10)}}function closeDnsManager(){document.getElementById("close-dns-manager").addEventListener("click",function(){resetDNSSManagerHtmlComponents(),parent.postMessage({messageType:"close-dns-manager"},"*")})}function addThirdPartyCookieSectionToggleHandler(){for(var e=document.getElementsByClassName("toggle-third-party-cookies-section"),t=0;t<e.length;t++)e[t].addEventListener("click",toggleThirdPartyCookieSection,!1)}function populateStateDropdownValues(){var e=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"DC",name:"District of Columbia"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"PR",name:"Puerto Rico"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],t=document.getElementById("form-state"),a=document.createElement("option");a.text="",a.value="",t.add(a);for(var n=0;n<e.length;n++){var s=e[n],a=document.createElement("option");a.text=s.name,a.value=s.code,"CA"===s.code&&(a.selected=!0),t.add(a)}var a=document.createElement("option");a.text="N/A",a.value="N/A",t.add(a)}function fetchCookieDetails(){fetch("GET","https://"+host+"/"+client+"/donotsell/configuration/"+start+".json","",function(e,t){loadCookiesGrid(e?[]:JSON.parse(t))})}function addFormSubmitButtonEventListeners(){document.querySelectorAll("#dsar-form button[type=submit]").forEach(function(e){e.addEventListener("click",function(e){e.target.setAttribute("clicked",!0)})})}function enableSubmitButtons(){document.querySelectorAll("#dsar-form button[type=submit]").forEach(function(e){e.removeAttribute("disabled")})}function addFormEventListeners(){var e=document.getElementById("dsar-form");e.addEventListener("input",debounce(function(e){switch(e.target.id){case"first-name":Validator.checkFirstName();break;case"last-name":Validator.checkLastName();break;case"email":Validator.checkEmail();break;case"phone-number":Validator.checkPhoneNumber();break;case"form-state":Validator.checkState();break;case"street-address":Validator.checkStreetAddress();break;case"city":Validator.checkCity();break;case"zip":Validator.checkZIP()}})),e.addEventListener("submit",function(e){if(e.preventDefault(),validateDSRForm()){var t=document.querySelector("#dsar-form button[type=submit]");if(t.setAttribute("disabled",!0),enableOptInWorkflow){var a=t.id;"proceed-to-dsr-request"==a?submitRequest():"trigger-opt-in-request"==a&&submitOptInRequest(),document.querySelectorAll("#dsar-form button[type=submit]").forEach(function(e){e.removeAttribute("clicked")})}else submitRequest()}})}function submitRequest(){var e=(navigator.language||navigator.userLanguage).toLowerCase().replace("-","_").substr(0,2),t=document.documentElement.lang,a=document.getElementById("first-name"),n=document.getElementById("last-name"),s=document.getElementById("email"),i=document.getElementById("phone-number"),l=document.getElementById("form-state"),r=document.getElementById("captchaContainer"),o=document.getElementById("street-address"),d=document.getElementById("city"),c=document.getElementById("zip"),u=lang,p=new FormData;if(p.append("brand",brand),p.append("firstName",null===a?"":a.value),p.append("lastName",null===n?"":n.value),p.append("email",null===s?"":s.value),p.append("phoneNumber",null===i?"":i.value),p.append("state",null===l?"":l.value),p.append("streetAddress",null===o?"":o.value),p.append("city",null===d?"":d.value),p.append("zip",null===c?"":c.value),p.append("language",null!==u?u:null!==t?t:null!==e?e:"en"),p.append("browserSignature",generateUniqueGuid()),p.append("pageUrl",pageUrl),p.append("isUserLoggedIn",isUserLoggedIn),p.append("showAddressFields",showAddressFields?"1":"0"),null!==r){var m=r.querySelector('input[name="captchaCode"]');p.append("captchaCode",null!==m?m.value:""),p.append("useCaptchaOnForm",useCaptchaOnForm)}fetch("POST","https://"+client+".clarip.com/donotsell/api/submit-request",p,function(e,t){if(reloadCaptcha(),e)enableDNSSSubmissionMessageContainer(!1,!0);else{if(""!==t){var r=JSON.parse(t);if("success"!==r.status){if(void 0!==r.validation)for(var u in r.validation){var p=document.getElementById(u);null!==p&&"captcha-code"===u?p=showInputValidatorError(p,captchaErrInvalid):showInputValidatorError(p,r.validation[u])}return r&&(document.getElementById("techMessage").innerHTML=document.getElementById("techMessage").innerHTML+" "+r.message),document.getElementById("techMessage").style.display="block",document.getElementById("popup-failure-message-container").style.display="block",!1}document.getElementById("techMessage").innerHTML=techMessage,document.getElementById("techMessage").style.display="none",document.getElementById("popup-failure-message-container").style.display="none"}null!=document.getElementById("captcha_image")&&(document.getElementById("captcha_image").src="https://"+client+".clarip.com/securimage/securimage_show.php?"+Math.random(),captcha_image_audioObj.refresh(),this.blur()),null!==a&&(a.value=""),null!==n&&(n.value=""),null!==s&&(s.value=""),null!==i&&(i.value=""),null!==l&&(l.value="CA"),null!==o&&(o.value=""),null!==d&&(d.value=""),null!==c&&(c.value="");for(var m=document.getElementById("dsar-form").getElementsByClassName("form-control"),g=0;g<m.length;g++){var h=m[g].parentElement;h.classList.remove("success"),h.classList.remove("error")}showSuccessMessageInPopup&&enableDNSSSubmissionMessageContainer(!0,!0);var y={dnssSubmitted:!0};"iOS"===dnssModuleIntegrationSource&&window.webkit.messageHandlers.claripDNSSCallback.postMessage(y),"android"===dnssModuleIntegrationSource&&claripDNSSCallback.postMessage(JSON.stringify(y));var f="?thank_message_title="+thanksMessageTitle+"&thank_message="+thanksMessage,v={messageType:"proceed-to-dsr-form",stateSelected:null===l?"":l.value,redirectToSuccessPage:redirectToSuccessPage,redurectURL:f,showSuccessMessageInPopup:showSuccessMessageInPopup};parent.postMessage(v,"*")}enableSubmitButtons()})}function submitGPCRequest(e,t=!1,a=!0){isUserLoggedIn=void 0!==e.loggedIn&&e.loggedIn,document.getElementById("captchaContainer"),isUserLoggedIn?(firstName=void 0!==e.firstName?e.firstName:"",lastName=void 0!==e.lastName?e.lastName:"",email=void 0!==e.email?e.email:"",phoneNumber=void 0!==e.phoneNumber?e.phoneNumber:"",state=void 0!==e.state?e.state:"",streetAddress=void 0!==e.streetAddress?e.streetAddress:"",city=void 0!==e.city?e.city:"",zip=void 0!==e.zip?e.zip:"",""===state&&(state="N/A")):(firstName="GPC",lastName="GPC",email="gpc@clarip.com",phoneNumber="",state="N/A",streetAddress="N/A",city="N/A",zip="N/A",hideLoader(!0),hideFormFields(!1));var n="https://"+client+".clarip.com/donotsell/api/submit-request",s=(navigator.language||navigator.userLanguage).toLowerCase().replace("-","_").substr(0,2),i=document.documentElement.lang,l=lang,r=new FormData;if(r.append("brand",brand),r.append("firstName",firstName),r.append("lastName",lastName),r.append("email",email),r.append("phoneNumber",phoneNumber),r.append("state",state),"undefined"!=typeof streetAddress&&r.append("streetAddress",streetAddress),"undefined"!=typeof city&&r.append("city",city),"undefined"!=typeof zip&&r.append("zip",zip),r.append("browserSignature",generateUniqueGuid()),r.append("pageUrl",pageUrl),r.append("gpcFlag","true"),r.append("isUserLoggedIn",isUserLoggedIn),r.append("showAddressFields",showAddressFields?"1":"0"),r.append("language",null!==l?l:null!==i?i:null!==s?s:"en"),isUserLoggedIn){var o=new FormData;o.append("email",email),fetch("POST","https://"+client+".clarip.com/donotsell/api/check",o,function(e,a){if(reloadCaptcha(),!e){var s=JSON.parse(a);if(s.success)document.getElementById("techMessage").innerHTML=techMessage,document.getElementById("techMessage").style.display="none",document.getElementById("popup-failure-message-container").style.display="none";else{if(void 0!==s.validation)for(var i in s.validation){var l=document.getElementById(i);null!==l&&showInputValidatorError(l,s.validation[i])}return s&&(document.getElementById("techMessage").innerHTML=document.getElementById("techMessage").innerHTML+" "+s.message),document.getElementById("techMessage").style.display="block",document.getElementById("popup-failure-message-container").style.display="block",!1}if(null!=document.getElementById("captcha_image")&&(document.getElementById("captcha_image").src="https://"+client+".clarip.com/securimage/securimage_show.php?"+Math.random(),captcha_image_audioObj.refresh(),this.blur()),s.data.hasCustomerOptedOut){showDNSSDenialMessage();return}if(t&&(void 0===previousLoggedInState||previousLoggedInState===isUserLoggedIn)){hideLoader(!0);return}hideLoader(!1),hideFormFields(!0),fetch("POST",n,r,function(e,t){e||(checkIfDNSSIsSubmitted=!0,showDNSSDenialMessage()),gpcRequestStatus="finished"})}})}else processGPCRequestForAnonymousUser&&fetch("POST",n,r,function(e,t){if(reloadCaptcha(),!e){var a=JSON.parse(t);if("success"!==a.status){if(void 0!==a.validation)for(var n in a.validation){var s=document.getElementById(n);null!==s&&"captcha-code"===n?showInputValidatorError(s,captchaErrInvalid):showInputValidatorError(s,a.validation[n])}return a&&(document.getElementById("techMessage").innerHTML=document.getElementById("techMessage").innerHTML+" "+a.message),document.getElementById("techMessage").style.display="block",document.getElementById("popup-failure-message-container").style.display="block",!1}document.getElementById("techMessage").innerHTML=techMessage,document.getElementById("techMessage").style.display="none",document.getElementById("popup-failure-message-container").style.display="none",checkIfDNSSIsSubmitted=!0,null!=document.getElementById("captcha_image")&&(document.getElementById("captcha_image").src="https://"+client+".clarip.com/securimage/securimage_show.php?"+Math.random(),captcha_image_audioObj.refresh(),this.blur())}})}function submitOptInRequest(e){var t=document.getElementById("first-name"),a=document.getElementById("last-name"),n=document.getElementById("email"),s=document.getElementById("phone-number"),i=document.getElementById("form-state"),l=document.getElementById("captchaContainer"),r=new FormData;if(r.append("brand",brand),r.append("firstName",null===t?"":t.value),r.append("lastName",null===a?"":a.value),r.append("email",null===n?"":n.value),r.append("phoneNumber",null===s?"":s.value),r.append("state","N/A"),r.append("browserSignature",generateUniqueGuid()),r.append("pageUrl",pageUrl),r.append("showAddressFields",showAddressFields?"1":"0"),null!==l){var o=l.querySelector('input[name="captchaCode"]');r.append("captchaCode",null!==o?o.value:""),r.append("useCaptchaOnForm",useCaptchaOnForm)}fetch("POST","https://"+client+".clarip.com/donotsell/api/submit-opt-in-request",r,function(e,l){if(reloadCaptcha(),e)enableDNSSSubmissionMessageContainer(!1,!1);else{if(""!==l){var r=JSON.parse(l);if("success"!==r.status){if(void 0!==r.validation)for(var o in r.validation){var d=document.getElementById(o);null!==d&&showInputValidatorError(d,r.validation[o])}return r&&(document.getElementById("techMessage").innerHTML=document.getElementById("techMessage").innerHTML+" "+r.message),document.getElementById("techMessage").style.display="block",document.getElementById("popup-failure-message-container").style.display="block",!1}document.getElementById("techMessage").innerHTML=techMessage,document.getElementById("techMessage").style.display="none",document.getElementById("popup-failure-message-container").style.display="none"}null!=document.getElementById("captcha_image")&&(document.getElementById("captcha_image").src="https://"+client+".clarip.com/securimage/securimage_show.php?"+Math.random(),captcha_image_audioObj.refresh(),this.blur()),null!==t&&(t.value=""),null!==a&&(a.value=""),null!==n&&(n.value=""),null!==s&&(s.value=""),null!==i&&(i.value="CA");for(var c=document.getElementById("dsar-form").getElementsByClassName("form-control"),u=0;u<c.length;u++){var p=c[u].parentElement;p.classList.remove("success"),p.classList.remove("error")}showSuccessMessageInPopup&&enableDNSSSubmissionMessageContainer(!0,!1),checkIfDNSSIsSubmitted=!1;var m={messageType:"trigger-opt-in-request",showSuccessMessageInPopup:showSuccessMessageInPopup};parent.postMessage(m,"*")}enableSubmitButtons()})}function toggleThirdPartyCookieSection(){document.getElementById("collapse-third-party-cookies").classList.toggle("showComponent")}function loadCookiesGrid(e){new GridBuilder(e).init()}function validateDSRForm(){var e=Validator.checkFirstName(),t=Validator.checkLastName(),a=Validator.checkEmail(),n=Validator.checkPhoneNumber(),s=Validator.checkState(),i=Validator.checkStreetAddress(),l=Validator.checkCity(),r=Validator.checkZIP();return e&&t&&a&&n&&s&&i&&l&&r&&s}function fetch(e,t,a,n){var s=new XMLHttpRequest;s.open(e,t),s.timeout=1e4,s.onload=function(){n(!1,s.response)},s.onerror=function(){n(!0,s.response)},s.ontimeout=function(){n(!0,s.response)},"GET"===e?s.send():s.send(a)}function debounce(e){var t,a=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return function(){for(var n=arguments.length,s=Array(n),i=0;i<n;i++)s[i]=arguments[i];t&&clearTimeout(t),t=setTimeout(function(){e.apply(null,s)},a)}}function showInputValidatorSuccess(e,t){var a=e.parentElement;a.classList.remove("error"),a.classList.add("success"),a.querySelector("small").textContent=""}function showInputValidatorError(e,t){var a=e.parentElement;a.classList.remove("success"),a.classList.add("error"),a.querySelector("small").textContent=t}function getQueryString(e,t){var a=t||window.location.href,n=RegExp("[?&]"+e+"=([^&#]*)","i").exec(a);return n?n[1]:null}function getUserAgent(){return window.navigator.userAgent}function generateUniqueGuid(){var e=window.navigator,t=window.screen,a=e.mimeTypes.length;return a+=e.userAgent.replace(/\D+/g,""),a+=e.plugins.length,a+=t.height||"",a+=t.width||"",a+=t.pixelDepth||""}function resetDNSSManagerHtmlComponents(){document.getElementById("right-to-opt-out-container").style.display="block";var e=document.getElementById("custom-text-block-container");e&&(e.style.display="block"),enableTpcSection&&(document.getElementById("dns-manager-details").style.display="block"),enableGPCSection&&(document.getElementById("gpc-signal-container").style.display="block"),hideLoader(!1),hideFormFields(),resetDnssSubmissionMessageContainer(),enableOptInWorkflow&&(document.getElementById("trigger-opt-in-request").style.display="none")}function enableDNSSSubmissionMessageContainer(e,t){document.getElementById("right-to-opt-out-container").style.display="none";var a=document.getElementById("custom-text-block-container");a&&(a.style.display="none"),enableTpcSection&&(document.getElementById("dns-manager-details").style.display="none"),enableGPCSection&&(document.getElementById("gpc-signal-container").style.display="none"),hideFormFields(),enableOptInWorkflow&&(document.getElementById("trigger-opt-in-request").style.display="none"),resetDnssSubmissionMessageContainer(),e?t?document.getElementById("popup-success-message-container").style.display="block":document.getElementById("popup-opt-in-success-message-container").style.display="block":t?document.getElementById("popup-failure-message-container").style.display="block":document.getElementById("popup-opt-in-failure-message-container").style.display="block"}function hideLoader(e=!0){var t=document.getElementById("form-loader");t&&(t.style.display=e?"none":"flex")}function hideFormFields(e=!0){document.getElementById("customer-input").style.display=e?"none":"block",document.getElementById("form-fields").style.display=e?"none":"flex",document.getElementById("proceed-to-dsr-request").style.display=e?"none":"block"}function showDNSSDenialMessage(){hideFormFields(),hideLoader(),document.getElementById("dns-denial-message-container").style.display="block",enableOptInWorkflow&&(document.getElementById("trigger-opt-in-request").style.display="block")}function disableOptInView(){hideLoader(),hideFormFields(!1),document.getElementById("dns-denial-message-container").style.display="none",document.getElementById("trigger-opt-in-request").style.display="none"}function resetDnssSubmissionMessageContainer(){document.getElementById("popup-success-message-container").style.display="none",document.getElementById("popup-opt-in-success-message-container").style.display="none",document.getElementById("popup-failure-message-container").style.display="none",document.getElementById("popup-opt-in-failure-message-container").style.display="none"}function receiveMessageFromParent(e){if(void 0!==e.data){var t=e.data.messageType;if(void 0!==t){if("prefill-dsr-form"===t){hideLoader(!1),document.getElementById("form-fields").style.display="none",document.getElementById("proceed-to-dsr-request").style.display="none";var a=e.data.attr.claripDNSSCustomerData;processPostedDataToClaripDNSSForm(a)}else if("process-gpc-signal"===t||"check-gpc-signal"===t){var n,a=e.data.attr.claripDNSSCustomerData;processGPCSignal(a,e.data.attr.automatic,e.data.attr.dynamicFormPrefill)}else if("hide-loader"===t)hideLoader(!0),hideFormFields(!1);else if("show-loader"===t)hideLoader(!1),hideFormFields(!0);else if("check-authenticated-user"===t){var a=e.data.attr.claripDNSSCustomerData;checkAuthenticatedUser(a)}parent.postMessage({messageType:t,status:"received"},"*")}}}function postDataToClaripDNSSForm(e){processPostedDataToClaripDNSSForm(e)}function processPostedDataToClaripDNSSForm(e){if(previousLoggedInState=isUserLoggedIn,dnssModuleIntegrationSource=void 0!==e.source?e.source:"web",isUserLoggedIn=void 0!==e.loggedIn&&e.loggedIn,isDnssCaptured=void 0!==e.isDnssCaptured&&e.isDnssCaptured,isGPCSignalEnabled=void 0!==e.isGPCSignalEnabled&&e.isGPCSignalEnabled,checkIfOptInRequestIsSubmitted=enableOptInWorkflow&&!isDnssCaptured,"web"!==dnssModuleIntegrationSource&&(document.getElementById("close-dns-manager").style.display="none"),enableGPCProcessing&&enableGPCSection&&(document.getElementById("gpc-signal-indicator").innerText=isGPCSignalEnabled?gpcSignalDetectedMessage:gpcSignalUndetectedMessage),!isUserLoggedIn){clearFormFields(),hideLoader(),hideFormFields(!1);return}if(firstName=void 0!==e.firstName?e.firstName:"",lastName=void 0!==e.lastName?e.lastName:"",email=void 0!==e.email?e.email:"",phoneNumber=void 0!==e.phoneNumber?e.phoneNumber:"",streetAddress=void 0!==e.streetAddress?e.streetAddress:"",city=void 0!==e.city?e.city:"",zip=void 0!==e.zip?e.zip:"",fillInFormFields(firstName,lastName,email,phoneNumber,state=void 0!==e.state?e.state:"",streetAddress,city,zip),"undefined"!=typeof showDenialMessageIfDSRSubmitted&&showDenialMessageIfDSRSubmitted){if(checkIfOptInRequestIsSubmitted){disableOptInView();return}if(checkIfDNSSIsSubmitted){showDNSSDenialMessage();return}var t=new FormData;t.append("email",email),fetch("POST","https://"+client+".clarip.com/donotsell/api/check",t,function(e,t){if(!e&&JSON.parse(t).data.hasCustomerOptedOut){checkIfDNSSIsSubmitted=!0,showDNSSDenialMessage(),"web"===dnssModuleIntegrationSource&&parent.postMessage({messageType:"set-dnss-cookie"},"*");return}"not-planned"!==gpcRequestStatus&&isGPCSignalEnabled||(hideLoader(!0),hideFormFields(!1))})}else isGPCSignalEnabled||(hideLoader(),hideFormFields(!1))}function fillInFormFields(e,t,a,n,s,i,l,r){var o=document.getElementById("first-name"),d=document.getElementById("last-name"),c=document.getElementById("email"),u=document.getElementById("phone-number"),p=document.getElementById("street-address"),m=document.getElementById("city"),g=document.getElementById("zip"),h=document.getElementById("form-state");null!==o&&""!==e&&(o.value=e,o.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(o.closest(".flex-item").style.display="none")),null!==d&&""!==t&&(d.value=t,d.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(d.closest(".flex-item").style.display="none")),null!==c&&""!==a&&(c.value=a,c.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(c.closest(".flex-item").style.display="none")),null!==u&&""!==n&&(u.value=n,u.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(u.closest(".flex-item").style.display="none")),null!==p&&""!==i&&(p.value=i,p.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(p.closest(".flex-item").style.display="none")),null!==m&&""!==l&&(m.value=l,m.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(m.closest(".flex-item").style.display="none")),null!==g&&""!==r&&(g.value=r,g.setAttribute("disabled",!0),hidePrefilledDSRFormFields&&(g.closest(".flex-item").style.display="none")),null!==h&&""!==s&&(h.value=s)}function clearFormFields(){var e=document.getElementById("first-name"),t=document.getElementById("last-name"),a=document.getElementById("email"),n=document.getElementById("phone-number"),s=document.getElementById("street-address"),i=document.getElementById("city"),l=document.getElementById("zip"),r=document.getElementById("form-state");e.value="",e.removeAttribute("disabled",!1),e.closest(".flex-item").style.display="block",t.value="",t.removeAttribute("disabled",!1),t.closest(".flex-item").style.display="block",a.value="",a.removeAttribute("disabled",!1),a.closest(".flex-item").style.display="block",null!==n&&(n.value="",n.removeAttribute("disabled",!1),n.closest(".flex-item").style.display="block"),null!==s&&(s.value="",s.removeAttribute("disabled",!1),s.closest(".flex-item").style.display="block"),null!==i&&(i.value="",i.removeAttribute("disabled",!1),i.closest(".flex-item").style.display="block"),null!==l&&(l.value="",l.removeAttribute("disabled",!1),l.closest(".flex-item").style.display="block"),r.value="CA";let o=document.querySelectorAll(".form-group");for(let d of o)d.classList.remove("error"),d.classList.remove("success"),d.querySelector("small").textContent="";document.getElementById("dns-denial-message-container").style.display="none"}function processGPCSignal(e,t=!1,a=!0){if("true"===(enableGPCProcessing||"").toString()){submitGPCRequest(e,!t,a);return}a||(hideLoader(!0),hideFormFields(!1))}function reloadCaptcha(){null!=document.getElementById("captchaContainer")&&("google_recaptcha_v2"==useCaptchaOnForm?grecaptcha.reset(window.globalCaptcha):"cloufdlare_turnstile"==useCaptchaOnForm&&turnstile.reset("#captchaContainer"))}function checkAuthenticatedUser(e){var t=void 0!==e.source?e.source:"web",a=void 0!==e.email?e.email:"",n=new FormData;n.append("email",a),fetch("POST","https://"+client+".clarip.com/donotsell/api/check",n,function(e,a){!e&&JSON.parse(a).data.hasCustomerOptedOut&&"web"===t&&parent.postMessage({messageType:"set-dnss-cookie"},"*")})}document.addEventListener("DOMContentLoaded",function(){closeDnsManager(),populateStateDropdownValues(),enableOptInWorkflow&&addFormSubmitButtonEventListeners(),addFormEventListeners(),enableTpcSection&&(addThirdPartyCookieSectionToggleHandler(),fetchCookieDetails())}),window.addEventListener("message",receiveMessageFromParent,!1);